<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thi·ªáp Tulip D·ªÖ Th∆∞∆°ng üå∑</title>
  <style>
    :root{--bg:#FFF5FA;--card:#ffffff;--accent:#FF7396;--muted:#6b6b6b}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{background:linear-gradient(180deg,#FFF5FA 0%, #FFF9FF 100%);display:flex;align-items:center;justify-content:center;padding:20px}

    .wrap{width:100%;max-width:900px;background:linear-gradient(180deg,#ffffffcc,#fffafaff);border-radius:18px;box-shadow:0 20px 50px rgba(90,60,90,0.12);overflow:hidden;position:relative}
    .stage{display:flex;gap:24px;padding:28px;align-items:center;flex-wrap:wrap}

    .visual{flex:1 1 420px;display:flex;align-items:center;justify-content:center;position:relative;padding:18px}
    .canvas{width:100%;max-width:420px;height:420px;display:grid;place-items:center}

    /* tulip container */
    .tulip-wrap{width:260px;height:260px;display:grid;place-items:center;transform-origin:center;transition:transform .6s cubic-bezier(.2,.9,.2,1)}
    .tulip-small{transform:scale(.4) translateY(12px);opacity:0}
    .open .tulip-small{transform:scale(1) translateY(0);opacity:1}

    /* heart rain */
    .hearts{position:absolute;inset:8px;pointer-events:none;overflow:hidden}
    .heart{position:absolute;font-size:18px;opacity:0;transform:translateY(-20px) scale(.8);animation:fall 3s linear forwards}
    @keyframes fall{0%{opacity:1;transform:translateY(-10px) scale(.8)}70%{opacity:1}100%{opacity:0;transform:translateY(360px) scale(1.1)}}

    /* right panel */
    .panel{width:320px;padding:14px 18px;display:flex;flex-direction:column;gap:12px}
    h1{margin:0;font-size:20px;color:#3d3740}
    p{margin:0;color:var(--muted)}

    .btn{display:inline-flex;align-items:center;gap:10px;justify-content:center;padding:12px 18px;border-radius:999px;border:none;background:linear-gradient(90deg,var(--accent),#FF9EB2);color:white;font-weight:700;cursor:pointer;box-shadow:0 10px 28px rgba(255,115,150,0.18);transition:transform .16s ease}
    .btn:active{transform:translateY(2px)}

    .small{font-size:13px;color:#9b8b98}
    .input{width:100%;padding:10px;border-radius:10px;border:1px solid #fde7ef;background:#fff}

    .messageCard{margin-top:8px;padding:12px;border-radius:12px;background:linear-gradient(180deg,#fff0f6,#fff9fb);box-shadow:inset 0 1px 0 rgba(255,255,255,0.6)}

    /* responsive */
    @media (max-width:860px){.stage{flex-direction:column-reverse}.panel{width:100%}}
  </style>
</head>
<body>
  <div class="wrap" id="wrap">
    <div class="stage" aria-live="polite">
      <div class="visual">
        <div class="canvas">
          <!-- SVG tulip illustration (cute pastel) -->
          <div class="tulip-wrap" id="tulipWrap" aria-hidden="false">
            <svg class="tulip-small" id="tulip" viewBox="0 0 200 200" width="260" height="260" xmlns="http://www.w3.org/2000/svg">
              <!-- soft background glow -->
              <defs>
                <radialGradient id="g1" cx="50%" cy="35%">
                  <stop offset="0%" stop-color="#fff6" />
                  <stop offset="100%" stop-color="#ffd6e6" />
                </radialGradient>
              </defs>
              <circle cx="100" cy="100" r="90" fill="url(#g1)" />

              <!-- stems -->
              <g transform="translate(40,30)" stroke-linecap="round">
                <path d="M30 100 C32 70, 50 40, 80 35" stroke="#78C88D" stroke-width="6" fill="none"/>
                <path d="M60 100 C58 72, 80 46, 110 44" stroke="#6FB07A" stroke-width="6" fill="none"/>
              </g>

              <!-- leaves -->
              <g transform="translate(40,30)" fill="#8FD79E" opacity="0.95">
                <path d="M18 90 C-10 70, 12 40, 38 60 C24 74, 18 90, 18 90z"/>
                <path d="M90 85 C120 70, 120 40, 100 56 C86 72, 90 85, 90 85z"/>
              </g>

              <!-- tulip petals (left) -->
              <g transform="translate(40,8)" fill="#FFB7CF" stroke="#FF9BB2" stroke-linejoin="round">
                <path id="petal1" d="M50 30 C20 10, 10 60, 50 80 C30 58, 50 30, 50 30z"/>
                <path id="petal2" d="M80 28 C110 10, 120 60, 80 82 C100 60, 80 28, 80 28z"/>
                <ellipse cx="65" cy="58" rx="18" ry="12" fill="#FFDCE6" opacity="0.9"/>
              </g>

              <!-- cute face on center petal -->
              <g transform="translate(40,8)">
                <circle cx="65" cy="58" r="4" fill="#6b4654"/>
                <circle cx="77" cy="58" r="4" fill="#6b4654"/>
                <path d="M63 68 Q70 74, 77 68" stroke="#6b4654" stroke-width="1.5" fill="none" stroke-linecap="round"/>
              </g>
            </svg>
          </div>

          <div class="hearts" id="hearts"></div>
        </div>
      </div>

      <div class="panel">
        <h1>Thi·ªáp Tulip D·ªÖ Th∆∞∆°ng üå∑</h1>
        <p class="small">M·ªü thi·ªáp ƒë·ªÉ b√≥ tulip v·∫Ω tay xu·∫•t hi·ªán ‚Äî g·ª≠i l·ªùi nh·∫Øn ƒë·ªÉ l√†m ai ƒë√≥ m·ªâm c∆∞·ªùi.</p>

        <div class="messageCard">
          <div style="font-weight:700">Mong em lu√¥n r·∫°ng r·ª° nh∆∞ hoa tulip n√†y üå∑</div>
          <div class="small" style="margin-top:6px">Vi·∫øt l·ªùi nh·∫Øn (t√πy √Ω):</div>
          <input id="userText" class="input" placeholder="V√≠ d·ª•: Em c∆∞·ªùi gi√∫p anh nh√© üíï" />

          <div style="display:flex;gap:10px;margin-top:12px">
            <button id="openBtn" class="btn">M·ªü thi·ªáp</button>
            <button id="sendBtn" class="btn" style="background:linear-gradient(90deg,#9EE7C0,#6FCF97);color:#123">G·ª≠i</button>
          </div>

          <div id="sentMessage" class="small" style="margin-top:10px;color:#444"></div>
        </div>

        <div style="margin-top:8px;color:#8b8b8b;font-size:13px">N·∫øu √¢m thanh kh√¥ng ch·∫°y, h√£y b·∫•m l·∫ßn n·ªØa ho·∫∑c cho ph√©p √¢m thanh tr√™n tr√¨nh duy·ªát.</div>
      </div>
    </div>
  </div>

  <script>
    const wrap = document.getElementById('wrap');
    const openBtn = document.getElementById('openBtn');
    const sendBtn = document.getElementById('sendBtn');
    const userText = document.getElementById('userText');
    const sentMessage = document.getElementById('sentMessage');
    const tulip = document.getElementById('tulip');
    const tulipWrap = document.getElementById('tulipWrap');
    const hearts = document.getElementById('hearts');
    let opened = false;

    // play a short gentle melody using WebAudio
    function playMelody(){
      try{
        const ctx = new (window.AudioContext||window.webkitAudioContext)();
        const now = ctx.currentTime;
        const notes = [523.25, 659.25, 783.99, 659.25]; // C5,E5,G5,E5
        notes.forEach((f,i)=>{
          const o = ctx.createOscillator();
          const g = ctx.createGain();
          o.type = 'sine'; o.frequency.value = f;
          g.gain.value = 0.0001;
          o.connect(g); g.connect(ctx.destination);
          g.gain.linearRampToValueAtTime(0.12, now + i*0.18);
          g.gain.exponentialRampToValueAtTime(0.0001, now + i*0.18 + 0.45);
          o.start(now + i*0.18); o.stop(now + i*0.18 + 0.6);
        });
      }catch(e){console.log('Audio error', e)}
    }

    function spawnHeart(xPercent){
      const el = document.createElement('div');
      el.className = 'heart';
      el.style.left = (xPercent || (Math.random()*80+8)) + '%';
      el.style.top = Math.random()*6 + '%';
      el.style.fontSize = (12 + Math.random()*14) + 'px';
      el.textContent = ['üíñ','‚ù§Ô∏è','üíó','üíï'][Math.floor(Math.random()*4)];
      hearts.appendChild(el);
      // remove after animation
      setTimeout(()=>el.remove(), 3200 + Math.random()*800);
    }

    function showTulip(){
      wrap.classList.add('open');
      // animate tulip (scale + slight rotate)
      tulipWrap.style.transform = 'scale(1)';
      tulip.classList.add('tulip-small');
      setTimeout(()=>{
        tulip.classList.remove('tulip-small');
      },20);

      // spawn multiple hearts
      for(let i=0;i<12;i++){
        setTimeout(()=>spawnHeart(), i*180);
      }
    }

    openBtn.addEventListener('click', ()=>{
      if(opened) return;
      opened = true;
      showTulip();
      playMelody();
    });

    sendBtn.addEventListener('click', ()=>{
      const txt = userText.value.trim() || 'Em c∆∞·ªùi ƒëi nh√©, anh nh·ªõ em üíï';
      sentMessage.textContent = 'ƒê√£ g·ª≠i: "' + txt + '"';
      // tiny pulse to show send
      wrap.animate([{transform:'scale(1)'},{transform:'scale(1.02)'},{transform:'scale(1)'}],{duration:340,easing:'ease-out'});
      // spawn a few hearts from center
      for(let i=0;i<6;i++){ setTimeout(()=>spawnHeart(45+Math.random()*10), i*120); }
      // reset input after a moment
      setTimeout(()=>{ userText.value=''; },900);
    });

    // allow tapping on tulip area to spawn a heart (playful)
    document.querySelector('.canvas').addEventListener('click', (e)=>{
      const rect = e.currentTarget.getBoundingClientRect();
      const xPct = ((e.clientX - rect.left) / rect.width) * 100;
      spawnHeart(xPct);
    });

    // accessibility: keyboard open
    openBtn.addEventListener('keyup', (e)=>{ if(e.key === 'Enter') openBtn.click(); });
    sendBtn.addEventListener('keyup', (e)=>{ if(e.key === 'Enter') sendBtn.click(); });

  </script>
</body>
</html>
