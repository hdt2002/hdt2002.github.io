<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thi·ªáp D·ªÖ Th∆∞∆°ng ‚Äî M·ªü ra nh√© üíê</title>
  <style>
    :root{--bg:#FFF8F2;--card:#ffffff;--accent:#FF6B9A;--muted:#6b6b6b}
    *{box-sizing:border-box}
    body{margin:0;height:100vh;display:grid;place-items:center;background:linear-gradient(180deg,#FFF8F2 0%, #FFF0F6 100%);font-family:Inter, system-ui, sans-serif}
    .scene{width:360px;max-width:92vw;}
    .card{background:var(--card);border-radius:22px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,0.12);text-align:center;position:relative;overflow:hidden}
    .flower{width:160px;height:160px;margin:0 auto;transform-origin:center;animation:float 4s ease-in-out infinite}
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-10px) rotate(-3deg)}100%{transform:translateY(0)}}
    .btn{display:inline-block;margin-top:16px;padding:10px 18px;border-radius:999px;border:none;background:linear-gradient(90deg,var(--accent),#FF9AB8);color:white;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(255,107,154,0.28);transition:transform .18s ease}
    .btn:active{transform:translateY(2px) scale(.995)}
    .message{margin-top:14px;color:var(--muted);font-size:15px}
    .envelope{position:absolute;left:50%;transform:translateX(-50%);bottom: -14px;width:220px;height:120px}
    .open .envelope{animation:envelopeUp .9s ease forwards}
    @keyframes envelopeUp{0%{transform:translate(-50%,0)}70%{transform:translate(-50%,-120px)}100%{transform:translate(-50%,-110px)}}
    .hidden{display:none}
    .messageCard{padding:12px;border-radius:12px;background:linear-gradient(180deg,#FFF0F6,#FFF8FF);margin-top:12px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.6)}
    .hearts{position:absolute;top:12px;right:14px;opacity:0;transform:scale(.6);transition:all .6s ease}
    .open .hearts{opacity:1;transform:scale(1);}
    .text-input{width:100%;padding:10px;border-radius:10px;border:1px solid #f0dbe0;margin-top:10px}
    .small{font-size:13px;color:#8b8b8b;margin-top:8px}
  </style>
</head>
<body>
  <div class="scene">
    <div class="card" id="card">
      <div class="hearts" id="hearts">‚ù§Ô∏è‚ù§Ô∏è</div>
      <svg class="flower" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <radialGradient id="g" cx="50%" cy="30%">
            <stop offset="0%" stop-color="#fff" stop-opacity=".6"/>
            <stop offset="100%" stop-color="#FFD7E5" stop-opacity="1"/>
          </radialGradient>
        </defs>
        <g transform="translate(60,60)">
          <!-- center -->
          <circle r="10" fill="#FFB6D6"/>
          <!-- petals -->
          <g fill="#FF8FB0" style="transition:transform .8s;">
            <ellipse rx="18" ry="30" transform="rotate(0) translate(0,-40)"/>
            <ellipse rx="18" ry="30" transform="rotate(45) translate(0,-40)"/>
            <ellipse rx="18" ry="30" transform="rotate(90) translate(0,-40)"/>
            <ellipse rx="18" ry="30" transform="rotate(135) translate(0,-40)"/>
            <ellipse rx="18" ry="30" transform="rotate(180) translate(0,-40)"/>
            <ellipse rx="18" ry="30" transform="rotate(225) translate(0,-40)"/>
            <ellipse rx="18" ry="30" transform="rotate(270) translate(0,-40)"/>
            <ellipse rx="18" ry="30" transform="rotate(315) translate(0,-40)"/>
          </g>
        </g>
      </svg>

      <div class="message">C√≥ ai ƒë√≥ ƒëang bu·ªìn? Nh·∫•n n√∫t ƒë·ªÉ m·ªü thi·ªáp nh√© üíå</div>
      <button class="btn" id="openBtn">M·ªü thi·ªáp</button>

      <div class="messageCard hidden" id="cardBody">
        <div style="font-weight:700; font-size:16px">Xin l·ªói nh√©, m√¨nh xin m·ªôt n·ª• c∆∞·ªùi :)</div>
        <div class="small">G·ª≠i em m·ªôt l·ªùi nh·∫Øn nh·ªè:</div>
        <input class="text-input" id="userText" placeholder="Vi·∫øt l·ªùi d·ªÖ th∆∞∆°ng..." />
        <div style="display:flex;gap:8px;justify-content:center;margin-top:8px">
          <button class="btn" id="sendBtn" style="padding:8px 14px">G·ª≠i</button>
          <button class="btn" id="resetBtn" style="padding:8px 14px;background:#fff;color:var(--accent);border:1px solid #ffd0df;box-shadow:none">Xem l·∫°i</button>
        </div>
        <div id="sentMessage" class="small" style="margin-top:10px;color:#454545"></div>
      </div>

      <!-- envelope graphic -->
      <svg class="envelope" viewBox="0 0 220 120" xmlns="http://www.w3.org/2000/svg">
        <rect x="10" y="10" width="200" height="90" rx="12" fill="#FFF" stroke="#FFD7E5"/>
        <polyline points="10,10 110,70 210,10" fill="#FFDCE7" opacity="0.95"/>
      </svg>
    </div>
    <div style="text-align:center;margin-top:12px;color:#8b8b8b;font-size:13px">N·∫øu em m·ªát, ch·ªâ c·∫ßn th·ªü s√¢u ‚Äî v√† nh·∫•n l·∫°i n√∫t nh√© ‚ù§Ô∏è</div>
  </div>

  <script>
    const openBtn = document.getElementById('openBtn');
    const card = document.getElementById('card');
    const cardBody = document.getElementById('cardBody');
    const sendBtn = document.getElementById('sendBtn');
    const resetBtn = document.getElementById('resetBtn');
    const userText = document.getElementById('userText');
    const sentMessage = document.getElementById('sentMessage');
    let opened = false;

    // Gentle melody using WebAudio API (no external files)
    function playMelody(){
      try{
        const ctx = new (window.AudioContext||window.webkitAudioContext)();
        const now = ctx.currentTime;
        const freqs = [440, 554.37, 659.25, 880]; // A4 C#5 E5 A5
        freqs.forEach((f,i)=>{
          const o = ctx.createOscillator();
          const g = ctx.createGain();
          o.type = 'sine'; o.frequency.value = f;
          g.gain.value = 0.0001;
          o.connect(g); g.connect(ctx.destination);
          g.gain.linearRampToValueAtTime(0.12, now + i*0.12);
          g.gain.exponentialRampToValueAtTime(0.0001, now + i*0.12 + 0.35);
          o.start(now + i*0.12); o.stop(now + i*0.12 + 0.5);
        });
      }catch(e){console.log('Audio not allowed', e)}
    }

    openBtn.addEventListener('click', ()=>{
      if(opened) return;
      opened = true;
      card.classList.add('open');
      cardBody.classList.remove('hidden');
      playMelody();
      // little confetti hearts
      const hearts = document.getElementById('hearts');
      hearts.innerText = 'üíñ‚ú®';
    });

    sendBtn.addEventListener('click', ()=>{
      const txt = userText.value.trim() || 'Em c∆∞·ªùi ƒëi nh√©, anh nh·ªõ em! üíï';
      sentMessage.textContent = 'ƒê√£ g·ª≠i: "' + txt + '"';
      // subtle bounce
      card.animate([{transform:'scale(1)'},{transform:'scale(1.03)'},{transform:'scale(1)'}],{duration:420,easing:'ease-out'});
    });

    resetBtn.addEventListener('click', ()=>{
      userText.value=''; sentMessage.textContent='';
      card.classList.remove('open'); opened=false; cardBody.classList.add('hidden');
      document.getElementById('hearts').innerText='‚ù§Ô∏è‚ù§Ô∏è';
    });
  </script>
</body>
</html>
